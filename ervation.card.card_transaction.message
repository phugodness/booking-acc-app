
[1mFrom:[0m /home/truongvanphu/workspace/DATN/booking-acc-app/app/controllers/reservations_controller.rb @ line 36 ReservationsController#create:

    [1;34m23[0m: [32mdef[0m [1;34mcreate[0m
    [1;34m24[0m:   params[[33m:reservation[0m][[33m:checkin_date[0m], params[[33m:reservation[0m][[33m:checkout_date[0m] = params[[33m:reservation[0m][[33m:checkin_date[0m].split([31m[1;31m'[0m[31m-[1;31m'[0m[31m[0m)
    [1;34m25[0m:   @reservation = [1;34;4mReservation[0m.new(reservation_params)
    [1;34m26[0m:   @reservation.card.ip_address = request.remote_ip
    [1;34m27[0m:   [32mif[0m @reservation.save
    [1;34m28[0m:     [1;34;4mReservationMailer[0m.booking_room(current_user, @reservation).deliver_later
    [1;34m29[0m:     [32mcase[0m params[[31m[1;31m'[0m[31mpayment_method[1;31m'[0m[31m[0m]
    [1;34m30[0m:     [32mwhen[0m [31m[1;31m'[0m[31mhandon[1;31m'[0m[31m[0m
    [1;34m31[0m:       redirect_to room_path([35mid[0m: params[[33m:reservation[0m][[33m:room_id[0m]), [35mnotice[0m: @reservation.messages
    [1;34m32[0m:     [32mwhen[0m [31m[1;31m'[0m[31mpaypal[1;31m'[0m[31m[0m
    [1;34m33[0m:       redirect_to @reservation.paypal_url(reservation_path(@reservation))
    [1;34m34[0m:     [32mwhen[0m [31m[1;31m'[0m[31mcard[1;31m'[0m[31m[0m
    [1;34m35[0m:       [32mif[0m @reservation.card.purchase
 => [1;34m36[0m:         binding.pry
    [1;34m37[0m:         redirect_to room_path([35mid[0m: params[[33m:reservation[0m][[33m:room_id[0m]), [35mnotice[0m: @reservation.card.card_transaction.message
    [1;34m38[0m:       [32melse[0m
    [1;34m39[0m:         redirect_to room_path([35mid[0m: params[[33m:reservation[0m][[33m:room_id[0m]), [35malert[0m: @reservation.card.card_transaction.message
    [1;34m40[0m:       [32mend[0m
    [1;34m41[0m:     [32mend[0m
    [1;34m42[0m:   [32melse[0m
    [1;34m43[0m:     redirect_to room_path([35mid[0m: params[[33m:reservation[0m][[33m:room_id[0m]), [35malert[0m: @reservation.errors.messages
    [1;34m44[0m:   [32mend[0m
    [1;34m45[0m: 
    [1;34m46[0m: [32mend[0m

